{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/oscarwang/Projects/take_home/serverless-stack-demo-client/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Auth } from \"aws-amplify\";\nimport Nav from \"react-bootstrap/Nav\";\nimport Navbar from \"react-bootstrap/Navbar\";\nimport { useHistory } from \"react-router-dom\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport ErrorBoundary from \"./components/ErrorBoundary\";\nimport { AppContext } from \"./libs/contextLib\";\nimport { onError } from \"./libs/errorLib\";\nimport Routes from \"./Routes\";\nimport \"./App.css\";\n\nfunction App() {\n  _s();\n\n  const history = useHistory();\n  const [isAuthenticating, setIsAuthenticating] = useState(true);\n  const [isAuthenticated, userHasAuthenticated] = useState(false);\n  useEffect(() => {\n    onLoad();\n  }, []);\n\n  async function onLoad() {\n    try {\n      await Auth.currentSession();\n      userHasAuthenticated(true);\n    } catch (e) {\n      if (e !== 'No current user') {\n        onError(e);\n      }\n    }\n\n    setIsAuthenticating(false);\n  }\n\n  async function handleLogout() {\n    await Auth.signOut();\n    userHasAuthenticated(false);\n    history.push(\"/login\");\n  }\n\n  return !isAuthenticating && /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App container py-3\",\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {\n      collapseOnSelect: true,\n      bg: \"light\",\n      expand: \"md\",\n      className: \"mb-3\",\n      children: [/*#__PURE__*/_jsxDEV(LinkContainer, {\n        to: \"/\",\n        children: /*#__PURE__*/_jsxDEV(Navbar.Brand, {\n          className: \"font-weight-bold text-muted\",\n          children: \"Scratch\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Navbar.Toggle, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Navbar.Collapse, {\n        className: \"justify-content-end\",\n        children: /*#__PURE__*/_jsxDEV(Nav, {\n          activeKey: window.location.pathname,\n          children: isAuthenticated ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(LinkContainer, {\n              to: \"/settings\",\n              children: /*#__PURE__*/_jsxDEV(Nav.Link, {\n                children: \"Settings\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 59,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Nav.Link, {\n              onClick: handleLogout,\n              children: \"Logout\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(LinkContainer, {\n              to: \"/signup\",\n              children: /*#__PURE__*/_jsxDEV(Nav.Link, {\n                children: \"Signup\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(LinkContainer, {\n              to: \"/login\",\n              children: /*#__PURE__*/_jsxDEV(Nav.Link, {\n                children: \"Login\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ErrorBoundary, {\n      children: /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n        value: {\n          isAuthenticated,\n          userHasAuthenticated\n        },\n        children: /*#__PURE__*/_jsxDEV(Routes, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 7\n  }, this);\n}\n\n_s(App, \"qr8qPFFhGb0ESIMtLeRIOE8ucpY=\", false, function () {\n  return [useHistory];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/oscarwang/Projects/take_home/serverless-stack-demo-client/src/App.js"],"names":["React","useState","useEffect","Auth","Nav","Navbar","useHistory","LinkContainer","ErrorBoundary","AppContext","onError","Routes","App","history","isAuthenticating","setIsAuthenticating","isAuthenticated","userHasAuthenticated","onLoad","currentSession","e","handleLogout","signOut","push","window","location","pathname"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Auth } from \"aws-amplify\";\nimport Nav from \"react-bootstrap/Nav\";\nimport Navbar from \"react-bootstrap/Navbar\";\nimport { useHistory } from \"react-router-dom\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport ErrorBoundary from \"./components/ErrorBoundary\";\nimport { AppContext } from \"./libs/contextLib\";\nimport { onError } from \"./libs/errorLib\";\nimport Routes from \"./Routes\";\nimport \"./App.css\";\n\nfunction App() {\n  const history = useHistory();\n  const [isAuthenticating, setIsAuthenticating] = useState(true);\n  const [isAuthenticated, userHasAuthenticated] = useState(false);\n\n  useEffect(() => {\n    onLoad();\n  }, []);\n\n  async function onLoad() {\n    try {\n      await Auth.currentSession();\n      userHasAuthenticated(true);\n    }\n    catch(e) {\n      if (e !== 'No current user') {\n        onError(e);\n      }\n    }\n\n    setIsAuthenticating(false);\n  }\n\n  async function handleLogout() {\n    await Auth.signOut();\n\n    userHasAuthenticated(false);\n\n    history.push(\"/login\");\n  }\n\n  return (\n    !isAuthenticating && (\n      <div className=\"App container py-3\">\n        <Navbar collapseOnSelect bg=\"light\" expand=\"md\" className=\"mb-3\">\n          <LinkContainer to=\"/\">\n            <Navbar.Brand className=\"font-weight-bold text-muted\">\n              Scratch\n            </Navbar.Brand>\n          </LinkContainer>\n          <Navbar.Toggle />\n          <Navbar.Collapse className=\"justify-content-end\">\n            <Nav activeKey={window.location.pathname}>\n              {isAuthenticated ? (\n                <>\n                  <LinkContainer to=\"/settings\">\n                    <Nav.Link>Settings</Nav.Link>\n                  </LinkContainer>\n                  <Nav.Link onClick={handleLogout}>Logout</Nav.Link>\n                </>\n              ) : (\n                <>\n                  <LinkContainer to=\"/signup\">\n                    <Nav.Link>Signup</Nav.Link>\n                  </LinkContainer>\n                  <LinkContainer to=\"/login\">\n                    <Nav.Link>Login</Nav.Link>\n                  </LinkContainer>\n                </>\n              )}\n            </Nav>\n          </Navbar.Collapse>\n        </Navbar>\n        <ErrorBoundary>\n          <AppContext.Provider value={{ isAuthenticated, userHasAuthenticated }}>\n            <Routes />\n          </AppContext.Provider>\n        </ErrorBoundary>\n      </div>\n    )\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}